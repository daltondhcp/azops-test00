{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "metadata": {
    "_generator": {
      "name": "AzOps"
    }
  },
  "parameters": {},
  "variables": {},
  "resources": [
    {
      "type": "microsoft.compute/virtualmachinescalesets",
      "name": "aks-agentpool-41955141-vmss",
      "sku": {
        "capacity": 1,
        "name": "Standard_DS2_v2",
        "tier": "Standard"
      },
      "apiVersion": "2022-11-01",
      "location": "westeurope",
      "identity": {
        "type": "UserAssigned",
        "userAssignedIdentities": {
          "/subscriptions/fd23378b-9b7f-4f73-b216-4dc4d09ecde7/resourceGroups/MC_auto_testpolicy_westeurope/providers/Microsoft.ManagedIdentity/userAssignedIdentities/testpolicy-agentpool": {
            "clientId": "251d0bce-ad97-4377-9823-ef58bd0f86ad",
            "principalId": "186f1916-e373-4978-b610-b49e71c2177e"
          },
          "/subscriptions/fd23378b-9b7f-4f73-b216-4dc4d09ecde7/resourcegroups/MC_auto_testpolicy_westeurope/providers/Microsoft.ManagedIdentity/userAssignedIdentities/azurepolicy-testpolicy": {
            "clientId": "dda19ca4-67bf-4233-9a58-d486497b631e",
            "principalId": "1cfd8b44-4d01-4ab8-9731-607ff373f927"
          }
        }
      },
      "tags": {
        "aks-managed-createOperationID": "6ce188ee-4087-4aa7-a640-0b9d523e12ac",
        "aks-managed-creationSource": "vmssclient-aks-agentpool-41955141-vmss",
        "aks-managed-kubeletIdentityClientID": "251d0bce-ad97-4377-9823-ef58bd0f86ad",
        "aks-managed-orchestrator": "Kubernetes:1.22.11",
        "aks-managed-poolName": "agentpool",
        "aks-managed-resourceNameSuffix": "42318307"
      },
      "properties": {
        "doNotRunExtensionsOnOverprovisionedVMs": false,
        "orchestrationMode": "Uniform",
        "overprovision": false,
        "platformFaultDomainCount": 1,
        "singlePlacementGroup": false,
        "uniqueId": "66c1fc23-1a07-4b2b-9a8a-387cb9952ee6",
        "upgradePolicy": {
          "mode": "Manual"
        },
        "virtualMachineProfile": {
          "extensionProfile": {
            "extensions": [
              {
                "name": "vmssCSE",
                "properties": {
                  "autoUpgradeMinorVersion": true,
                  "publisher": "Microsoft.Azure.Extensions",
                  "settings": {},
                  "type": "CustomScript",
                  "typeHandlerVersion": "2.0"
                }
              },
              {
                "name": "aks-agentpool-41955141-vmss-AKSLinuxBilling",
                "properties": {
                  "autoUpgradeMinorVersion": true,
                  "publisher": "Microsoft.AKS",
                  "settings": {},
                  "type": "Compute.AKS.Linux.Billing",
                  "typeHandlerVersion": "1.0"
                }
              },
              {
                "name": "AKSLinuxExtension",
                "properties": {
                  "autoUpgradeMinorVersion": false,
                  "provisionAfterExtensions": [
                    "vmssCSE"
                  ],
                  "publisher": "Microsoft.AKS",
                  "suppressFailures": false,
                  "type": "Compute.AKS.Linux.AKSNode",
                  "typeHandlerVersion": "1.30"
                }
              }
            ],
            "extensionsTimeBudget": "PT16M"
          },
          "networkProfile": {
            "networkInterfaceConfigurations": [
              {
                "name": "aks-agentpool-41955141-vmss",
                "properties": {
                  "dnsSettings": {
                    "dnsServers": []
                  },
                  "enableAcceleratedNetworking": true,
                  "enableIPForwarding": true,
                  "ipConfigurations": [
                    {
                      "name": "ipconfig1",
                      "properties": {
                        "loadBalancerBackendAddressPools": [
                          {
                            "id": "/subscriptions/fd23378b-9b7f-4f73-b216-4dc4d09ecde7/resourceGroups/MC_auto_testpolicy_westeurope/providers/Microsoft.Network/loadBalancers/kubernetes/backendAddressPools/kubernetes"
                          },
                          {
                            "id": "/subscriptions/fd23378b-9b7f-4f73-b216-4dc4d09ecde7/resourceGroups/MC_auto_testpolicy_westeurope/providers/Microsoft.Network/loadBalancers/kubernetes/backendAddressPools/aksOutboundBackendPool"
                          }
                        ],
                        "primary": true,
                        "privateIPAddressVersion": "IPv4",
                        "subnet": {
                          "id": "/subscriptions/fd23378b-9b7f-4f73-b216-4dc4d09ecde7/resourceGroups/MC_auto_testpolicy_westeurope/providers/Microsoft.Network/virtualNetworks/aks-vnet-42318307/subnets/aks-subnet"
                        }
                      }
                    }
                  ],
                  "primary": true
                }
              }
            ]
          },
          "osProfile": {
            "adminUsername": "azureuser",
            "allowExtensionOperations": true,
            "computerNamePrefix": "aks-agentpool-41955141-vmss",
            "linuxConfiguration": {
              "disablePasswordAuthentication": true,
              "enableVMAgentPlatformUpdates": false,
              "provisionVMAgent": true,
              "ssh": {
                "publicKeys": [
                  {
                    "keyData": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCy+lb3uEYlHfMNc/mGI4QToOyeBJySpAcIzAyDxoSrSeHPKKvQWFUJ2DWkQHqWN+IHfp0+jb2eR869Vr4NIOp+8yJXdf2+dbGO1k3glAGpdJpw+oT434U0AyzS681f5GsZgk4bWaK4efi/KG9ZYfFOqYlV6NLSa9pS5sak5TaP+d0QesfoM8YUK1jJtVQEZwt2K5Gbj7RRAOZiiwKLeZdim/zqwYuOTQl7mMa1IaemrCLwn/Zkl794c/1gI+buoUptNjwybQV3t5uXGOjCHX9iACx1HK55FnX/8ge87yHO37RvTHZtu8Twjg+XjvsK5C2MAacUhE+jqGe1tExZuhRScxoYG6ie3b5ay/gWrS02WZv9b20XfvDJ6mbE0QYPLjFAAlx1d9Gf3imqD6U1vLN794Y+fxczWzDJ7C0WKSrJpt7C5kmoZONVmW9HgXk1qn0wYm5D8cwHGeOpvyyuwIbIbcU4TpYLUivJdfsCHr1KUZ7UY7yB/NGG/sv9JO23seU/RyocXQGhhXAI/hyOXyMHd4zGGsqVgRf4YXgwJ5QodAFznGmQ4zlNeAXMHJn5+Ulwr5+ctv1xR1J2mfu9cGEgAzGMEF6oUZXy4ReBn2N+Pwj3cuW1/AwdHVscgxMmFeVDN83gLvyfK2b1M0HPA25O3N1S53S34XDW0pEytaqPAQ==\n",
                    "path": "/home/azureuser/.ssh/authorized_keys"
                  }
                ]
              }
            },
            "requireGuestProvisionSignal": true,
            "secrets": []
          },
          "storageProfile": {
            "imageReference": {
              "id": "/subscriptions/109a5e88-712a-48ae-9078-9ca8b3c81345/resourceGroups/AKS-Ubuntu/providers/Microsoft.Compute/galleries/AKSUbuntu/images/1804gen2containerd/versions/2022.07.18"
            },
            "osDisk": {
              "caching": "ReadWrite",
              "createOption": "FromImage",
              "diskSizeGB": 128,
              "managedDisk": {
                "storageAccountType": "Premium_LRS"
              },
              "osType": "Linux"
            }
          }
        },
        "zoneBalance": false
      },
      "zones": [
        "1",
        "2",
        "3"
      ]
    }
  ],
  "outputs": {}
}
